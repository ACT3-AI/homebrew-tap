# frozen_string_literal: true

require_relative "../lib/registry_download"

class AsceHubCli < Formula
  desc "CLI for interacting with ACE Hub"
  homepage "https://git.act3-ace.com/ace/hub/cli"
  version "0.0.7"

  # Generated by https://git.act3-ace.com/ace/homebrew-ace-tools/-/blob/master/bin/formulize.sh
  on_macos do
    if Hardware::CPU.intel?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce-hub-cli@sha256:202a88d1257d741714ff5620de765a253fb7766eb1ff5f7ac710e01fb1923354",
          using: BlobDownloadStrategy
      sha256 "202a88d1257d741714ff5620de765a253fb7766eb1ff5f7ac710e01fb1923354"
    end
    if Hardware::CPU.arm?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce-hub-cli@sha256:dbd9c2f973614acc61b3371fa00a73abcedab928a02bd431041e86b9524d5e6a",
          using: BlobDownloadStrategy
      sha256 "dbd9c2f973614acc61b3371fa00a73abcedab928a02bd431041e86b9524d5e6a"
    end
  end

  # Generated by https://git.act3-ace.com/ace/homebrew-ace-tools/-/blob/master/bin/formulize.sh
  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce-hub-cli@sha256:907d488d25e78e31e8e70f515c91e6bfaccbd4ff14afef9589b8e68c47dbc4d6",
          using: BlobDownloadStrategy
      sha256 "907d488d25e78e31e8e70f515c91e6bfaccbd4ff14afef9589b8e68c47dbc4d6"
    end
    if Hardware::CPU.intel?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce-hub-cli@sha256:9b6f3175c6e9806c88cc2b9174a2be7d3db5f6693e7098938edf57d6ff122fcd",
          using: BlobDownloadStrategy
      sha256 "9b6f3175c6e9806c88cc2b9174a2be7d3db5f6693e7098938edf57d6ff122fcd"
    end
  end

  def install
    bin.install "hub"

    # with_homebrew_path do
    #   # Completions from downstream tools are sourced by asce,
    #   # so they must be discoverable on the PATH
    #   generate_completions_from_executable(bin/"hub", "completion")
    # end

    # # Generate manpages
    # mkdir "man" do
    #   system bin/"hub", "gendocs", "man", "."
    #   man1.install Dir["*.1"]
    #   # man5.install Dir["*.5"]
    # end
  end

  # test do
  #   system "#{bin}/hub", "version"
  # end
end
