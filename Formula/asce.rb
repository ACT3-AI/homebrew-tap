# frozen_string_literal: true

require_relative "../lib/registry_download"

class Asce < Formula
  desc "CLI for managing all things ASCE"
  homepage "https://git.act3-ace.com/ace/cli"
  version "0.1.4"

  # Generated by https://git.act3-ace.com/ace/homebrew-ace-tools/-/blob/master/bin/formulize.sh
  on_macos do
    if Hardware::CPU.intel?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce@sha256:7bf7599137f46f9fdf7e9a3837d01cc4df0f6b4cd81b4e534a176fed7ce51ad9",
          using: BlobDownloadStrategy
      sha256 "7bf7599137f46f9fdf7e9a3837d01cc4df0f6b4cd81b4e534a176fed7ce51ad9"
    end
    if Hardware::CPU.arm?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce@sha256:ce8cbb27a3baf68674bc84e1966b9b3e19991ca358c744feaa25946d91a56785",
          using: BlobDownloadStrategy
      sha256 "ce8cbb27a3baf68674bc84e1966b9b3e19991ca358c744feaa25946d91a56785"
    end
  end

  # Generated by https://git.act3-ace.com/ace/homebrew-ace-tools/-/blob/master/bin/formulize.sh
  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce@sha256:841ad6ac659645cec743b296f107254b2aefdd48517684e69bb3234378c11272",
          using: BlobDownloadStrategy
      sha256 "841ad6ac659645cec743b296f107254b2aefdd48517684e69bb3234378c11272"
    end
    if Hardware::CPU.intel?
      url "reg.git.act3-ace.com/ace/homebrew-ace-tools/formula/asce@sha256:6348cb319320c4962f4aead42031b6d99c12fa2f093072bb64935b10895d2c42",
          using: BlobDownloadStrategy
      sha256 "6348cb319320c4962f4aead42031b6d99c12fa2f093072bb64935b10895d2c42"
    end
  end

  def install
    bin.install "asce"
    # generate_completions_from_executable(bin/"asce", "completion")

    # # Generate manpages
    # mkdir "man" do
    #   system bin/"asce", "gendocs", "man", "."
    #   man1.install Dir["*.1"]
    #   man5.install Dir["*.5"]
    # end

    # # Generate JSON Schema definitions
    # # Use pkgetc here so path doesn't change over version numbers
    # # Cannot use symlink for this because VS Code cannot follow symlinks for schema files
    # mkdir pkgetc do
    #   system bin/"asce", "genschema", "."
    # end
  end

  test do
    system "#{bin}/asce", "version"
  end
end
